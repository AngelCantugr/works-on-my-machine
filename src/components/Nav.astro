---
import { toTitleCase } from '$/utils'
import { NAV_ITEMS } from '$/config'

const base = import.meta.env.BASE_URL
---
<nav class="nav py-3">
    <ul class="nav-list dark:text-theme-dark-secondary" transition:animate="fade">
         {
            Object.keys(NAV_ITEMS).map(navItemKey => {
                const href = `${base}${NAV_ITEMS[navItemKey].path}`.replace(/\/$/, '') || '/'
                const normalizedPathname = Astro.url.pathname.replace(/\/$/, '') || '/'
                const normalizedBase = base.replace(/\/$/, '') || '/'
                const isActive = normalizedPathname === (normalizedBase + NAV_ITEMS[navItemKey].path).replace(/\/$/, '') || (normalizedPathname === '/' && normalizedBase + NAV_ITEMS[navItemKey].path === '/')
                return <li>
                <a class:list={[
                    `pb-1 border-b-2 hover:border-gray-400 hover:dark:border-gray-700 `,
                    !isActive ? 'border-gray-100 dark:border-gray-800': '',
                    isActive ? 'border-theme-primary' : ''
                ]} href={href} title={NAV_ITEMS[navItemKey].title}>{toTitleCase(NAV_ITEMS[navItemKey].title)}</a>
            </li>
            })
        }
    </ul>
</nav>
<style>
    .nav-list {
        @apply inline-flex list-none gap-8 text-xl font-semibold text-theme-secondary dark:text-theme-dark-secondary py-2 flex-wrap mb-8
    }
</style>
